<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ÙƒÙˆÙŠØ² Ø§Ù„ØµØ¯Ù‚ ÙˆØªØ­Ù…Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©</title>

  <style>
    :root{
      font-size: 22px;
      --bg: #f6f7fb;
      --bg2: #eef2ff;
      --card: rgba(255,255,255,.92);
      --text: #0f172a;
      --muted: #475569;
      --border: rgba(15,23,42,.10);
      --shadow: 0 18px 45px rgba(15,23,42,.10);

      --brand: #4f46e5;
      --brand2:#9333ea;

      --btn: #111827;
      --btnText: #ffffff;
      --btn2: rgba(15,23,42,.06);
      --btn2Text: #0f172a;

      --choice: rgba(255,255,255,.88);
      --choiceHover: rgba(79,70,229,.06);

      --okBg: rgba(16,185,129,.12);
      --okBorder: rgba(16,185,129,.35);

      --noBg: rgba(244,63,94,.10);
      --noBorder: rgba(244,63,94,.35);

      --radius: 22px;
    }

    html.dark{
      --bg: #070a12;
      --bg2:#0b1022;
      --card: rgba(17,24,39,.78);
      --text: #e5e7eb;
      --muted: #cbd5e1;
      --border: rgba(148,163,184,.18);
      --shadow: 0 18px 55px rgba(0,0,0,.45);

      --brand: #7c3aed;
      --brand2:#22c55e;

      --btn: #e5e7eb;
      --btnText: #0b1022;
      --btn2: rgba(148,163,184,.12);
      --btn2Text:#e5e7eb;

      --choice: rgba(2,6,23,.25);
      --choiceHover: rgba(124,58,237,.16);

      --okBg: rgba(16,185,129,.14);
      --okBorder: rgba(16,185,129,.40);

      --noBg: rgba(244,63,94,.12);
      --noBorder: rgba(244,63,94,.40);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Tahoma, Arial;
      color: var(--text);
      line-height: 1.75;
      background:
        radial-gradient(1200px 700px at 20% 10%, var(--bg2), transparent 60%),
        radial-gradient(900px 700px at 80% 20%, rgba(147,51,234,.12), transparent 55%),
        radial-gradient(900px 700px at 50% 90%, rgba(79,70,229,.10), transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg));
      transition: background .2s ease, color .2s ease;
      overflow-x:hidden;
    }

    .wrap{ max-width: 900px; margin: 0 auto; padding: 26px 18px 34px; }

    .shell{
      position: relative;
      border-radius: calc(var(--radius) + 10px);
      background: linear-gradient(135deg, rgba(79,70,229,.12), rgba(147,51,234,.08), rgba(34,197,94,.06));
      padding: 14px;
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .card{
      background: var(--card);
      border-radius: var(--radius);
      border: 1px solid var(--border);
      padding: 20px;
      backdrop-filter: blur(10px);
    }

    /* Intro/Result only */
    .center{
      text-align:center;
      padding: 14px 10px 10px;
    }
    .title{
      margin: 0;
      font-size: 1.45rem;
      font-weight: 900;
      letter-spacing: .2px;
    }
    .sub{
      margin: 10px 0 0;
      color: var(--muted);
      font-size: .82rem;
    }
    .row{
      display:flex;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 18px;
    }
    .btn{
      border:0;
      border-radius: 16px;
      padding: 12px 16px;
      cursor:pointer;
      font-size: .82rem;
      background: var(--btn);
      color: var(--btnText);
      transition: transform .05s ease, opacity .15s ease;
      display:inline-flex; align-items:center; gap:8px;
    }
    .btn:active{ transform: translateY(1px); }
    .btn.secondary{
      background: var(--btn2);
      color: var(--btn2Text);
      border: 1px solid var(--border);
    }

    /* Question screen: ÙÙ‚Ø· Ø³Ø¤Ø§Ù„ + ØµÙˆØ±Ø© + Ø§Ø®ØªÙŠØ§Ø±Ø§Øª */
    .q{
      font-size: 1.15rem;
      margin: 0;
      font-weight: 800;
      line-height: 1.65;
    }

    .qMedia{
      margin-top: 14px;
      border-radius: 18px;
      overflow: hidden;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.06);
    }
    .qMedia img{
      display:block;
      width: 100%;
      height: 260px;
      object-fit: cover;
    }
    @media (max-width: 420px){
      :root{ font-size: 20px; }
      .qMedia img{ height: 210px; }
    }

    .choices{ display:grid; gap:10px; margin-top: 14px; }

    button.choice{
      text-align:right;
      padding: 14px 14px;
      border-radius: 18px;
      border: 1px solid var(--border);
      background: var(--choice);
      color: var(--text);
      cursor: pointer;
      font-size: .95rem;
      transition: background .15s ease, transform .05s ease, border-color .15s ease;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    button.choice:hover{ background: var(--choiceHover); }
    button.choice:active{ transform: translateY(1px); }
    button.choice[disabled]{ cursor:not-allowed; opacity:.92; }

    .mark{ font-size: 1rem; opacity: 0; transform: translateY(2px); transition: opacity .12s ease, transform .12s ease; }
    .choice.correct .mark, .choice.wrong .mark{ opacity: 1; transform: translateY(0); }
    .choice.correct{ border-color: var(--okBorder); background: var(--okBg); }
    .choice.wrong{ border-color: var(--noBorder); background: var(--noBg); }

    /* Stars celebration */
    .starBurst{
      position: fixed;
      left: 0; top: 0;
      width: 10px; height: 10px;
      pointer-events:none;
      z-index: 9999;
      opacity: 0;
      transform: translate(-50%,-50%) scale(0.9);
      animation: pop .75s ease-out forwards;
      filter: drop-shadow(0 10px 14px rgba(0,0,0,.18));
    }
    @keyframes pop{
      0%   { opacity: 0; transform: translate(-50%,-50%) scale(0.6); }
      10%  { opacity: 1; }
      100% { opacity: 0; transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) scale(1.15); }
    }
  </style>

  <script>
    // Theme (localStorage + html.dark)
    (function initTheme(){
      const stored = localStorage.getItem("theme");
      const theme = (stored === "dark" || stored === "light") ? stored : "light";
      const root = document.documentElement;
      if(theme === "dark") root.classList.add("dark");
      else root.classList.remove("dark");
      localStorage.setItem("theme", theme);
    })();

    function toggleTheme(){
      const root = document.documentElement;
      const isDark = root.classList.contains("dark");
      const next = isDark ? "light" : "dark";
      if(next === "dark") root.classList.add("dark");
      else root.classList.remove("dark");
      localStorage.setItem("theme", next);
      updateThemeButtonLabel();
    }

    function updateThemeButtonLabel(){
      const root = document.documentElement;
      const btns = document.querySelectorAll("[data-theme-btn]");
      btns.forEach(btn => {
        btn.innerHTML = root.classList.contains("dark")
          ? 'â˜€ï¸ <span>Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­</span>'
          : 'ğŸŒ™ <span>Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†</span>';
      });
    }

    function spawnStars(x, y){
      const stars = ["â­","âœ¨","ğŸŒŸ"];
      for(let i=0;i<14;i++){
        const el = document.createElement("div");
        el.className = "starBurst";
        el.textContent = stars[Math.floor(Math.random()*stars.length)];
        const dx = (Math.random()*220 - 110).toFixed(0) + "px";
        const dy = (Math.random()*180 - 90).toFixed(0) + "px";
        el.style.setProperty("--dx", dx);
        el.style.setProperty("--dy", dy);
        el.style.left = x + "px";
        el.style.top  = y + "px";
        el.style.fontSize = (16 + Math.random()*18).toFixed(0) + "px";
        document.body.appendChild(el);
        setTimeout(() => el.remove(), 800);
      }
    }

    // Shuffle (Ù„ØªØºÙŠÙŠØ± ØªØ±ØªÙŠØ¨ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±Ø§Øª)
    function shuffle(array){
      const a = array.slice();
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }
  </script>
</head>

<body>
  <div class="wrap">
    <div class="shell">
      <div class="card" id="card"></div>
    </div>
  </div>

<script>
  // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (Ø§Ù„ØµÙˆØ±Ø© ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯: q1.png ... q10.png)
 const quiz = [
  {
    q: "Ù…ÙˆÙ‚Ù 1: ÙˆØ¬Ø¯ØªÙ Ø¯ÙØªØ±Ù‹Ø§ Ù…Ù…Ø²Ù‚Ù‹Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø§ÙˆÙ„Ø©. Ø³Ø£Ù„ØªÙ Ø§Ù„Ù…Ø¹Ù„Ù…Ø©: Ù…Ù† Ù…Ø²Ù‘Ù‚ Ø§Ù„Ø¯ÙØªØ±ØŸ",
    img: "q1.png.png",
    choices: ["Ø£Ù‚ÙˆÙ„ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© ÙˆØ£Ø¹ØªØ°Ø±","Ø£Ù„ÙˆÙ… ØºÙŠØ±ÙŠ","Ø£Ø³ÙƒØª"],
    correctText: "Ø£Ù‚ÙˆÙ„ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© ÙˆØ£Ø¹ØªØ°Ø±"
  },
  {
    q: "Ù…ÙˆÙ‚Ù 2: Ø§Ù†Ù‚Ù„Ø¨ ÙƒØ£Ø³ Ù…Ø§Ø¡ ÙˆØ³Ù‚Ø· Ø§Ù„Ù…Ø§Ø¡ Ø¹Ù„Ù‰ Ø£Ø±Ø¶ Ø§Ù„ÙØµÙ„. Ù‚Ø§Ù„Øª Ø§Ù„Ù…Ø¹Ù„Ù…Ø©: Ù…Ù† Ø£Ø³Ù‚Ø· Ø§Ù„Ù…Ø§Ø¡ØŸ",
    img: "q2.png.png",
    choices: ["Ø£Ù‚ÙˆÙ„: Ø£Ù†Ø§ØŒ ÙˆØ£Ù…Ø³Ø­ Ø§Ù„Ù…ÙƒØ§Ù†","Ø£Ù‚ÙˆÙ„: Ù„ÙŠØ³Øª Ø£Ù†Ø§","Ø£Ø¶Ø­Ùƒ ÙˆØ£ØªØ±ÙƒÙ‡"],
    correctText: "Ø£Ù‚ÙˆÙ„: Ø£Ù†Ø§ØŒ ÙˆØ£Ù…Ø³Ø­ Ø§Ù„Ù…ÙƒØ§Ù†"
  },
  {
    q: "Ù…ÙˆÙ‚Ù 3: Ø§Ù†ÙƒØ³Ø± Ù‚Ù„Ù…Ùƒ ÙÙŠ Ø§Ù„ÙØµÙ„. Ø³Ø£Ù„Øª Ø§Ù„Ù…Ø¹Ù„Ù…Ø©: Ù…Ù† ÙƒØ³Ø± Ø§Ù„Ù‚Ù„Ù…ØŸ",
    img: "q3.png.png",
    choices: ["Ø£Ù‚ÙˆÙ„ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© ÙˆØ£Ø¹ØªØ°Ø±","Ø£ØªÙ‡Ù… Ø²Ù…ÙŠÙ„ÙŠ","Ø£Ø®Ø¨Ù‘Ø¦ Ø§Ù„Ù‚Ù„Ù…"],
    correctText: "Ø£Ù‚ÙˆÙ„ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© ÙˆØ£Ø¹ØªØ°Ø±"
  },
  {
    q: "Ù…ÙˆÙ‚Ù 4: Ù†Ø³ÙŠØªÙ Ø§Ù„ÙˆØ§Ø¬Ø¨ ÙÙŠ Ø§Ù„Ø¨ÙŠØª. Ù‚Ø§Ù„Øª Ø§Ù„Ù…Ø¹Ù„Ù…Ø©: Ù…Ù† Ù†Ø³ÙŠ Ø§Ù„ÙˆØ§Ø¬Ø¨ØŸ",
    img: "q4.png.png",
    choices: ["Ø£Ù‚ÙˆÙ„: Ø£Ù†Ø§ØŒ ÙˆØ£Ø¹ØªØ°Ø± ÙˆØ£Ø¹Ø¯ Ø¨Ø¥Ø­Ø¶Ø§Ø±Ù‡ ØºØ¯Ù‹Ø§","Ø£Ù‚ÙˆÙ„: Ù…Ø§ Ø¹Ù†Ø¯ÙŠ ÙˆØ§Ø¬Ø¨ Ø£ØµÙ„Ù‹Ø§","Ø£ØµÙ…Øª ÙˆØ£ØªØ¸Ø§Ù‡Ø± Ø£Ù†ÙŠ Ù„Ù… Ø£Ø³Ù…Ø¹"],
    correctText: "Ø£Ù‚ÙˆÙ„: Ø£Ù†Ø§ØŒ ÙˆØ£Ø¹ØªØ°Ø± ÙˆØ£Ø¹Ø¯ Ø¨Ø¥Ø­Ø¶Ø§Ø±Ù‡ ØºØ¯Ù‹Ø§"
  },
  {
    q: "Ù…ÙˆÙ‚Ù 5: Ù…Ø²Ù‘Ù‚ØªÙ ÙˆØ±Ù‚Ø© Ø²Ù…ÙŠÙ„ØªÙƒ Ø¨Ø§Ù„Ø®Ø·Ø£. Ø³Ø£Ù„ØªÙƒ: Ù…Ù† Ù…Ø²Ù‘Ù‚ Ø§Ù„ÙˆØ±Ù‚Ø©ØŸ",
    img: "q5.png.png",
    choices: ["Ø£Ù‚ÙˆÙ„: Ø£Ù†Ø§ØŒ Ø¢Ø³ÙØ© ÙˆØ³Ø£Ø¹ÙˆØ¶Ùƒ Ø¨ÙˆØ±Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©","Ø£Ù‚ÙˆÙ„: Ù…Ø§ Ø£Ø¯Ø±ÙŠ","Ø£Ù‚ÙˆÙ„: Ø²Ù…ÙŠÙ„Ø© Ø£Ø®Ø±Ù‰ ÙØ¹Ù„Øª Ø°Ù„Ùƒ"],
    correctText: "Ø£Ù‚ÙˆÙ„: Ø£Ù†Ø§ØŒ Ø¢Ø³ÙØ© ÙˆØ³Ø£Ø¹ÙˆØ¶Ùƒ Ø¨ÙˆØ±Ù‚Ø© Ø¬Ø¯ÙŠØ¯Ø©"
  },
  {
    q: "Ù…ÙˆÙ‚Ù 6: ÙƒØ³Ø±ØªÙ Ù„Ø¹Ø¨Ø© Ù…Ù† Ø£Ù„Ø¹Ø§Ø¨ Ø±ÙƒÙ† Ø§Ù„ÙØµÙ„. Ø³Ø£Ù„ØªÙƒ Ø§Ù„Ù…Ø¹Ù„Ù…Ø©: Ù…Ø§Ø°Ø§ Ø­Ø¯Ø«ØŸ",
    img: "q6.png.png",
    choices: ["Ø£Ù‚ÙˆÙ„ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© ÙˆØ£Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ø¥ØµÙ„Ø§Ø­Ù‡Ø§","Ø£Ø®Ø¨Ù‘Ø¦ Ø§Ù„Ù„Ø¹Ø¨Ø© ÙÙŠ Ø§Ù„Ø¯Ø±Ø¬","Ø£Ù‚ÙˆÙ„: Ù„Ø§ Ø£Ø¹Ø±Ù"],
    correctText: "Ø£Ù‚ÙˆÙ„ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© ÙˆØ£Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ø¥ØµÙ„Ø§Ø­Ù‡Ø§"
  },
  {
    q: "Ù…ÙˆÙ‚Ù 7: Ø£Ø®Ø°ØªÙ Ù…Ù…Ø­Ø§Ø© Ø²Ù…ÙŠÙ„ØªÙƒ Ø¯ÙˆÙ† Ø§Ø³ØªØ¦Ø°Ø§Ù† Ø«Ù… Ù†Ø³ÙŠØªÙ Ø¥Ø±Ø¬Ø§Ø¹Ù‡Ø§. Ù‚Ø§Ù„Øª: Ø£ÙŠÙ† Ù…Ù…Ø­Ø§ØªÙŠØŸ",
    img: "q7.png.png",
    choices: ["Ø£Ù‚ÙˆÙ„: Ø£Ø®Ø°ØªÙ‡Ø§ ÙˆØ£Ø¹ÙŠØ¯Ù‡Ø§ ÙˆØ£Ø¹ØªØ°Ø±","Ø£Ù‚ÙˆÙ„: Ù…Ø§ Ø´ÙØªÙ‡Ø§","Ø£ØµÙ…Øª ÙˆØ£ØªØ±ÙƒÙ‡Ø§ ØªØ¨Ø­Ø«"],
    correctText: "Ø£Ù‚ÙˆÙ„: Ø£Ø®Ø°ØªÙ‡Ø§ ÙˆØ£Ø¹ÙŠØ¯Ù‡Ø§ ÙˆØ£Ø¹ØªØ°Ø±"
  },
  {
    q: "Ù…ÙˆÙ‚Ù 8: Ù†Ù‚Ù„ØªÙ Ø¥Ø¬Ø§Ø¨Ø© Ù…Ù† ØµØ¯ÙŠÙ‚ØªÙƒ Ø¯ÙˆÙ† ÙÙ‡Ù…. Ø³Ø£Ù„ØªÙƒ Ø§Ù„Ù…Ø¹Ù„Ù…Ø©: Ù‡Ù„ Ø­Ù„Ù„ØªÙ Ø¨Ù†ÙØ³ÙƒØŸ",
    img: "q8.png.png",
    choices: ["Ø£Ù‚ÙˆÙ„ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© ÙˆØ£Ø·Ù„Ø¨ Ø´Ø±Ø­Ù‹Ø§ Ù„Ø£ØªØ¹Ù„Ù…","Ø£Ù‚ÙˆÙ„: Ù†Ø¹Ù… Ø­Ù„Ù„Øª ÙˆØ­Ø¯ÙŠ","Ø£ØºÙŠÙ‘Ø± Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹"],
    correctText: "Ø£Ù‚ÙˆÙ„ Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© ÙˆØ£Ø·Ù„Ø¨ Ø´Ø±Ø­Ù‹Ø§ Ù„Ø£ØªØ¹Ù„Ù…"
  },
  {
    q: "Ù…ÙˆÙ‚Ù 9: Ø¶Ø§Ø¹ ÙƒØªØ§Ø¨Ùƒ Ø«Ù… ÙˆØ¬Ø¯ØªÙ‡ Ø²Ù…ÙŠÙ„ØªÙƒ. Ù‚Ø§Ù„Øª: Ù‡Ø°Ø§ ÙƒØªØ§Ø¨ÙƒØŒ Ù‡Ù„ ÙƒØ§Ù† Ù…Ø¹ÙƒØŸ",
    img: "q9.png.png",
    choices: ["Ø£Ù‚ÙˆÙ„: Ù†Ø¹Ù…ØŒ Ø´ÙƒØ±Ù‹Ø§ Ù„Ùƒ","Ø£Ù‚ÙˆÙ„: Ù„ÙŠØ³ ÙƒØªØ§Ø¨ÙŠ","Ø¢Ø®Ø°Ù‡ Ø¯ÙˆÙ† ÙƒÙ„Ø§Ù…"],
    correctText: "Ø£Ù‚ÙˆÙ„: Ù†Ø¹Ù…ØŒ Ø´ÙƒØ±Ù‹Ø§ Ù„Ùƒ"
  },
  {
    q: "Ù…ÙˆÙ‚Ù 10: ÙƒÙ†ØªÙ Ù‚Ø§Ø¦Ø¯Ø© Ø§Ù„ØµÙ ÙˆÙ„Ù… ØªÙ†ØªØ¨Ù‡ÙŠ Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø·Ø§Ø¨ÙˆØ±. Ù‚Ø§Ù„Øª Ø§Ù„Ù…Ø¹Ù„Ù…Ø©: Ù…Ø§Ø°Ø§ Ù†ÙØ¹Ù„ØŸ",
    img: "q10.png.png",
    choices: ["Ø£Ø¹ØªØ°Ø± ÙˆØ£Ø±ØªØ¨ Ø§Ù„Ø·Ø§Ø¨ÙˆØ± Ø¨Ù‡Ø¯ÙˆØ¡ ÙˆØ£Ø·Ù„Ø¨ Ø§Ù„ØªØ¹Ø§ÙˆÙ†","Ø£Ù‚ÙˆÙ„: Ù‡Ù… Ø§Ù„Ø³Ø¨Ø¨ ÙˆÙ„ÙŠØ³ Ø£Ù†Ø§","Ø£ØªØ±Ùƒ Ø§Ù„Ù…ÙƒØ§Ù†"],
    correctText: "Ø£Ø¹ØªØ°Ø± ÙˆØ£Ø±ØªØ¨ Ø§Ù„Ø·Ø§Ø¨ÙˆØ± Ø¨Ù‡Ø¯ÙˆØ¡ ÙˆØ£Ø·Ù„Ø¨ Ø§Ù„ØªØ¹Ø§ÙˆÙ†"
  }
];


  let started = false;
  let idx = 0;
  let answers = Array(quiz.length).fill(null);

  // Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨Ø¹Ø¯ Ø®Ù„Ø·Ù‡Ø§
  let currentOptions = []; // [{text, isCorrect}...]

  const card = document.getElementById("card");

  function score(){
    return answers.reduce((s, ok) => s + (ok === true ? 1 : 0), 0);
  }

  function renderIntro(){
    card.innerHTML = `
      <div class="center">
        <h1 class="title">ÙƒÙˆÙŠØ² Ø§Ù„ØµØ¯Ù‚ ÙˆØªØ­Ù…Ù„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©</h1>
        <p class="sub">Ø§Ø¶ØºØ·ÙŠ Ø¨Ø¯Ø¡ØŒ Ø«Ù… ØªØ¸Ù‡Ø± Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ØªØ¨Ø§Ø¹Ù‹Ø§.</p>

        <div class="row">
          <button class="btn" id="startBtn">Ø§Ø¨Ø¯Ø£ âœ¨</button>
          <button class="btn secondary" data-theme-btn id="themeBtn">ğŸŒ™ <span>Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†</span></button>
        </div>
      </div>
    `;

    document.getElementById("startBtn").onclick = () => {
      started = true;
      idx = 0;
      answers = Array(quiz.length).fill(null);
      renderQuestion();
    };

    document.getElementById("themeBtn").onclick = toggleTheme;
    updateThemeButtonLabel();
  }

  function renderResult(){
    const s = score();
    card.innerHTML = `
      <div class="center">
        <p class="sub" style="margin-top:0">ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡.</p>
        <p class="title" style="font-size:1.2rem; margin-top:8px;">Ø¯Ø±Ø¬ØªÙƒ: ${s} / ${quiz.length}</p>

        <div class="row">
          <button class="btn" id="restartBtn">Ø¥Ø¹Ø§Ø¯Ø© Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ğŸ”</button>
          <button class="btn secondary" data-theme-btn id="themeBtn2">ğŸŒ™ <span>Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†</span></button>
        </div>
      </div>
    `;
    document.getElementById("restartBtn").onclick = () => {
      started = false;
      renderIntro();
    };
    document.getElementById("themeBtn2").onclick = toggleTheme;
    updateThemeButtonLabel();
  }

  function buildShuffledOptions(item){
    const opts = item.choices.map(t => ({ text: t, isCorrect: t === item.correctText }));
    return shuffle(opts);
  }

  function renderQuestion(){
    if(!started) return renderIntro();
    if(idx >= quiz.length) return renderResult();

    const item = quiz[idx];
    currentOptions = buildShuffledOptions(item);

    // ØµÙØ­Ø© Ø§Ù„Ø³Ø¤Ø§Ù„: ÙÙ‚Ø· Ø³Ø¤Ø§Ù„ + ØµÙˆØ±Ø© + Ø§Ø®ØªÙŠØ§Ø±Ø§Øª
    card.innerHTML = `
      <p class="q">${item.q}</p>
      <div class="qMedia" id="qMedia">
        <img src="${item.img}" alt="ØµÙˆØ±Ø© Ø§Ù„Ø³Ø¤Ø§Ù„" loading="lazy"
             onerror="this.parentElement.style.display='none';">
      </div>
      <div class="choices" id="choices"></div>
    `;

    const choicesWrap = document.getElementById("choices");

    currentOptions.forEach((opt, i) => {
      const btn = document.createElement("button");
      btn.className = "choice";
      btn.innerHTML = `<span>${opt.text}</span><span class="mark"></span>`;
      btn.onclick = (e) => choose(i, e);
      choicesWrap.appendChild(btn);
    });
  }

  function choose(choiceIndex, event){
    const picked = currentOptions[choiceIndex];
    const ok = !!picked.isCorrect;
    answers[idx] = ok;

    const buttons = Array.from(document.querySelectorAll("button.choice"));
    buttons.forEach((b, i) => {
      b.disabled = true;
      const mark = b.querySelector(".mark");
      b.classList.remove("correct","wrong");

      if(currentOptions[i].isCorrect){
        b.classList.add("correct");
        if(mark) mark.textContent = "ğŸŒŸ";
      } else if(i === choiceIndex && !ok){
        b.classList.add("wrong");
        if(mark) mark.textContent = "âœ–";
      } else {
        if(mark) mark.textContent = "";
      }
    });

    if(ok){
      if(event && event.clientX && event.clientY) spawnStars(event.clientX, event.clientY);
      else {
        const rect = card.getBoundingClientRect();
        spawnStars(rect.left + rect.width/2, rect.top + 120);
      }
    }

    setTimeout(() => {
      idx++;
      renderQuestion();
    }, 650);
  }

  renderIntro();
</script>
</body>
</html>
